<!DOCTYPE html>

<html>

    <head>
        <title>Welcome to JavaScript!</title>
        <link href="css/styles.css" rel="stylesheet">
    </head>

    <body>
        <script src="js/bundle.js"></script>
        <script>

            // using the geolocation API below, create a function named
            // getLocation. This function should return a promise object
            // Off the promise, register a function with then, when function
            // executes it should recieve the position data

            var x = document.getElementById("demo");
            
            function findMyPosition() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(showPosition);
                } else {
                    x.innerHTML = "Geolocation is not supported by this browser.";
                }
            }
            
            function showPosition(position) {
                x.innerHTML = "Latitude: " + position.coords.latitude + 
                "<br>Longitude: " + position.coords.longitude; 
            }

            // test code to see if your getLocation works
            getLocation().then(position => console.log(position));

        </script>
        <script>

            // fetch('http://localhost:3010/books')
            //     .then(res => res.json())
            //     .then(books => console.log(books));


            // build me a fetch function which returns a promise
            // when I call then on the promise, I want the results
            // to be passed in

            // fetch('http://localhost:3010/books')
            //    .then(results => console.log(results));

            // https://github.com/training4developers/javascript_03132017

            const fetch = (url) => {

                return new Promise((resolve, reject) => {

                    const xhr = new XMLHttpRequest();

                    xhr.addEventListener('readystatechange', () => {
                        if (xhr.status === 200 && xhr.readyState === 4) {
                            resolve(JSON.parse(xhr.responseText));
                        }
                    });

                    xhr.open('GET', url);
                    xhr.send();

                });
            };

            fetch('http://localhost:3010/books')
                .then(results => console.log(results));


        </script>
    </body>

</html>